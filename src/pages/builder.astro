---
import Builder from '@/layouts/Builder.astro'

const classes = [
    {
        "code":"sac",
        "nombre":"Sacrógrito"
    },
    {
        "code":"cra",
        "nombre":"Ocra"
    },
    {
        "code":"pan",
        "nombre":"Pandawa"
    },
    {
        "code":"eni",
        "nombre":"Aniripsa"
    },
    {
        "code":"hup",
        "nombre":"Hipermago"
    },
    {
        "code":"sra",
        "nombre":"Sram"
    },
    {
        "code":"ugi",
        "nombre":"Uginak"
    },
    {
        "code":"zur",
        "nombre":"Zurcarák"
    },
    {
        "code":"xel",
        "nombre":"Xelor"
    },
    {
        "code":"tym",
        "nombre":"Tymador"
    },
    {
        "code":"enu",
        "nombre":"Anutrof"
    },
    {
        "code":"osa",
        "nombre":"Osamodas"
    },
    {
        "code":"zob",
        "nombre":"Zobal"
    },
    {
        "code":"iop",
        "nombre":"Yopuka"
    },
    {
        "code":"selo",
        "nombre":"Selotrop"
    },
    {
        "code":"sad",
        "nombre":"Sadida"
    },
    {
        "code":"fec",
        "nombre":"Feca"
    },
    {
        "code":"ste",
        "nombre":"Steamer"
    }
]
---
<Builder title="Wakbuilder">
    <main class="builder grid grid-cols-[30%_1fr] grid-rows-[1fr] p-2 gap-2">
        <section style="grid-area: items" class="items grid-cols-[1fr] grid-rows-[15%_15%_1fr] bg-slate-600 rounded-md p-2">
            <div style="grid-area: build" class="build"><p>build</p></div>
            <div style="grid-area: filters" class="filters"><p>filters</p></div>
            <div style="grid-area: results" class="results"><p>results</p></div>
        </section>
        <section style="grid-area: stats" class="stats bg-slate-600 rounded-md p-2">
            <div class="flex gap-2 items-center mb-2">
                <h1>Visama</h1>
                <select class="rounded-md bg-slate-700 w-[100%] border-slate-400" name="classes" id="classes">
                    {classes.map((clase) => 
                        <option value={clase.code}>{clase.nombre}</option>
                    )}
                </select>
                <input id="char_level" class="rounded-md bg-slate-700 w-[100%] border-slate-400" type="number" value="1" />
            </div>
            <div class="flex gap-2">
                <div class="bg-slate-700 rounded-md inline p-2 border border-slate-400">
                    <img src="https://vertylo.github.io/wakassets/icons/hp.png" class="inline" alt="pdv"> PdV
                    <p id="pdv_label" class="text-center">50</p>
                </div>
                <div class="bg-slate-700 rounded-md inline p-2 border border-slate-400">
                    <img src="https://vertylo.github.io/wakassets/icons/ap.png" class="inline" alt="pa"> PA
                    <p class="text-center">6</p>
                </div>
                <div class="bg-slate-700 rounded-md inline p-2 border border-slate-400">
                    <img src="https://vertylo.github.io/wakassets/icons/mp.png" class="inline" alt="pm"> PM
                    <p class="text-center">3</p>
                </div>
                <div class="bg-slate-700 rounded-md inline p-2 border border-slate-400">
                    <img src="https://vertylo.github.io/wakassets/icons/wp.png" class="inline" alt="pw"> PW
                    <p class="text-center">6</p>
                </div>
            </div>
        </section>
    </main>
    <script>
        document.addEventListener("DOMContentLoaded", (event) => {
            let charLevelInput = document.getElementById("char_level")
            let pdvLabel = document.getElementById("pdv_label")
            if (charLevelInput != null) {
                charLevelInput.addEventListener("input", (e) => {
                    let level = parseInt(e.target.value)
                    if (level <= 0) {
                        charLevelInput.value = 1
                    } else if (level > 245) {
                        charLevelInput.value = 245
                    }
                    if (pdvLabel != null) pdvLabel.innerText = level*10+40
                })
            }
        });
        
    </script>
</Builder>
